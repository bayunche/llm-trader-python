{
  "interface_contract": {
    "checked": true,
    "notes": "配置 API 需暴露 GET/PUT /api/config/models 及 /metrics，并返回 ModelEndpointItem/metrics JSON；Actor/Checker 服务的输入输出结构已在《项目需求.md》5.2-5.5 描述，与 DecisionService/ObservationBuilder 契约明确。"
  },
  "tech_choices": {
    "checked": true,
    "notes": "继续使用 FastAPI+SQLModel 处理配置存储，ModelGateway 仍使用 httpx + 自研熔断；惰性化仅调整初始化模式，不引入新依赖。"
  },
  "risks_identified": {
    "checked": true,
    "notes": "若惰性 gateway 实现不当可能导致并发下重复创建或测试无法注入 stub；若 _refresh_gateway_from_db 未使用最新实例则配置更新失效；需注意保持 session_scope 上下文管理正确关闭。"
  },
  "verification_strategy": {
    "checked": true,
    "notes": "完成修改后运行 `PYTHONPATH=.codex/vendor:src DATABASE_URL=sqlite:///tmp/full-test.db REDIS_ENABLED=0 python3 -m pytest tests/api/test_config_models.py -vv` 验证 API；必要时补充 lighter 调用以确保导入不触发 DB 连接，并更新 verification.md/.codex/testing.md。"
  },
  "status": "ready_for_planning"
}
